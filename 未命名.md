请手动复制：

========== 第 1 页 ==========
中国移动通信集团有限公司2022年申报高工论文

中国移动通信集团有限公司

!"#$%&'()*+),-./

!"#$%&'()*+,-./0123
!

3

姓名位恒曦

所在单位中移（杭州）信息技术有限公司

研究方向家庭自智网络服务

日期2023年4月23日

========== 第 2 页 ==========
中国移动通信集团有限公司2022年申报高工论文

目录

1.引言.......................................................................................................................................................2

1.1.研究背景....................................................................................................................................................2
1.2.研究内容....................................................................................................................................................3
1.3.小结.............................................................................................................................................................4

2.平台架构设计......................................................................................................................................4

2.1.业务架构....................................................................................................................................................4
2.2.技术架构....................................................................................................................................................6

3.关键模型（算法）设计.....................................................................................................................8

3.1.终端及应用识别模型.............................................................................................................................8
3.2.质差网络识别模型..................................................................................................................................9
3.3.组网方案设计模型................................................................................................................................10
3.4.WI-FI服务调度模型.............................................................................................................................11

4.关键技术设计....................................................................................................................................12

4.1.技术设计原则.........................................................................................................................................12
4.2.微服务架构.............................................................................................................................................13
4.3.DEVOPS开发运维一体化....................................................................................................................14
4.4.KUBERNETES容器管理........................................................................................................................15
4.5.HYSTRIX服务熔断................................................................................................................................16
4.6.ISTIO服务网格.......................................................................................................................................18
4.7.ELK分布式日志框架............................................................................................................................19
4.8.PROMETHUS运行状态监测.................................................................................................................20

5.平台应用实践....................................................................................................................................21

6.总结与展望........................................................................................................................................22

2

========== 第 3 页 ==========
中国移动通信集团有限公司2022年申报高工论文

家庭自智网络服务平台的设计与实现

中移（杭州）信息技术有限公司位恒曦

摘要：随着互联网的发展，用户对家庭网络服务要求日益提高。个性化的家庭网络运行环境、

多样化上网终端等，使得家庭内网服务高度离散化，带来了家庭网络高品质服务的挑战。本

文研究基于端云协同建立面向家庭内网的自智网络服务平台，创新提出了云感知、云建模、

云调度的“云Wi-Fi引擎”能力及家庭场景模型，并通过平台的应用实践探索家庭Wi-Fi网

络“一户一案、一机一策”的精细化保障，为用户提供一种自优自愈、自智服务的家庭内网

品质服务方案。

关键词：家庭内网；自智网络；云Wi-Fi引擎

Abstract:With the development of the Internet, users are increasingly demanding home network

services.  Personalized  home  network  operating  environment,  diversified  Internet  terminals,  etc.,

make  home  network  services  highly  discretization,  bringing  challenges  to  high-quality  home

network services. This paper studies the establishment of an intelligent network service platform

for home intranet based on end cloud collaboration, proposes the "cloud Wi-Fi engine" capability

of cloud awareness, cloud modeling, and cloudscheduling and the home scene model, and explores

the  fine  guarantee  of  "one  case,  one  machine,  one  policy"  of  home  Wi-Fi  network  through  the

application  practice  of  the  platform  to  provide  users  with  aself-optimization,  self-healing,  and

intelligent serviceshome network quality service scheme.

Keywords:Homenetwork;Intelligent network;CloudWi-Fiengine

1

========== 第 4 页 ==========
中国移动通信集团有限公司2022年申报高工论文

1.引言

1.1.研究背景

随着后互联网时代发展，全民社会经济生活常态化在线，网络教学、线上会

议、4K高清直播、云VR/AR、元宇宙等智慧生活应用需求暴涨，家庭成为新互

联经济的关键场景，驱动高品质网络成为家庭必备要件。截至2022年12月，我

国网民规模为10.67亿，互联网普及率达75.6%，使用手机上网的比例达99.8%；

使用台式电脑、笔记本电脑、电视和平板电脑上网的比例分别为34.2%、32.8%、

25.9%和28.5%[1]。

用户使用家庭宽带的体验瓶颈已经由接入网侧转移到了驻地网侧（家庭内

网）。当前，家庭全光组网FTTR（光纤到房间）、Wi-Fi6、Mesh组网等技术为

家庭网络的千兆覆盖、无缝漫游提供了较好的保障，但因家庭内网运行环境复杂、

上网终端多样等，为用户提供确定性家庭网络服务仍存在较大挑战，包括Wi-Fi

体验感知、智慧家庭应用和网络安全威胁，用户对家庭上网“慢、断”的投诉仍

然较多。

随着网络智能化发展，自2017年开始，包括ITU-T、3GPP、CCSA等国际

与区域标准组织，陆续提出自主进化网络、随愿网络、自智网络、自动驾驶网络

[2]等概念，旨在通过自治与智能化手段，实现信息技术、通信技术、数据与智能

化在网络内的深度融合，实现网络自服务、自发放、自保障能力全面提升，为垂

直行业和消费者用户提供“零等待”“零接触”“零故障”体验，实现网络的主

动式、预防式、敏捷式运维。通过引入AI、大数据等技术，可以实现接入网络的

自动、自愈、自优、自治；使能宽带新业务、新场景，并实现极致用户体验、全

自动运维、精准用户保障、高效资源利用等[3]。

面对用户对家庭网络服务诉求、当前的问题与挑战，结合网络智能化演进方

向，本文研究基于端云协同建立面向家庭的自智网络服务平台。针对家庭多上网

设备、多路由器等复杂组网场景，基于云边端算力融合，创新构建云感知、云建

模、云调度的“云Wi-Fi引擎”核心能力以及家庭网络自智服务模型，实现家庭

Wi-Fi保障“一户一案、一机一策”，有效解决上网终端Wi-Fi差异化保障难、

2

========== 第 5 页 ==========
中国移动通信集团有限公司2022年申报高工论文

Wi-Fi劣化动态感知难、网络精准营销难三个行业难题，为用户提供一种确定性

家庭网络品质服务方案，实现家庭内网自优自愈、自智服务。

1.2.研究内容

本文的研究内容主要三方面：

（1）家庭自智网络服务平台的架构设计

平台架构设计包括业务架构和技术架构。业务架构包括数据、模型、服务三

层。数据层通过结构化存储家庭设备、网络、应用、业务的静态及动态数据，并

以家庭为单位形成家庭网络档案，构成平台的核心数据资产；模型层是平台的算

法仓，以服务场景为驱动，实现典型家庭场景模型，如终端识别、应用识别、质

差识别、组网方案设计、网络意图分析、应用分发推荐等；服务层面向不同角色

提供多样化服务支撑，包括面向用户的场景化网络服务，如Wi-Fi管控、一键体

检、智能测速、网络报告、IoT连接保障、闪联服务、网络云备份、智能调优、

绿色上网、游戏/教育加速、直播加速等，面向网管人员提供家庭网络远程管理运

维支撑服务，如设备管理、随用检测、劣化感知、智能调度、网络画像、远程排

障等，面向营销人员提供智能营销决策服务，如行为画像、质差营销、应用营销、

智能随销、离网预警等。

技术架构包括基础设施、数据存储、服务框架、业务服务、网关、UI构成，

以及保障平台实现的开发平台、运维平台。在技术架构设计上，使用微服务、容

器化、持续集成、MVC、分布式集群等技术来构造平台，实现核心服务内聚收敛，

满足业务灵活可变和便捷承载。

（2）家庭自智网络服务平台的关键模型（算法）设计

关键模型包括终端及应用识别模型、质差网络识别模型、组网方案设计模型、

Wi-Fi服务调度模型。终端及应用识别模型基于上网终端的网络报文，结合机器

学习算法进行识别。质差网络识别模型基于对家庭网络DPI数据，结合多种手段

综合分析，并运用机器学习算法（XGBoost），以场景驱动，构建网络特征库及

质差识别规则，判定家庭网络运行质量。组网方案设计模型基于业内室内Wi-Fi

场强分布算法和Wi-Fi信号强度室内传输路径耗损经验模型，通过优化建筑介质

衰减因子、路径耗损指数、综合修正系数，输出Wi-Fi热力图，进而支撑组网方

3

========== 第 6 页 ==========
中国移动通信集团有限公司2022年申报高工论文

案设计。Wi-Fi服务调度模型针对互联网设备、IoT设备，构建差异化Wi-Fi服

务保障（不同星级Wi-Fi），形成Wi-Fi服务保障策略，进行差异化服务调度。

（3）家庭自智网络服务平台的关键技术设计

关键技术包括微服务架构、DevOps开发运维一体化、Kubernetes容器管理、

Hystrix服务熔断、Istio服务网格、Elk分布式日志框架、Promethus运行状态监

测。通过综合运用多种技术手段，确保系统的安全、稳定、高效。

1.3.小结

本章主要从用户对家庭网络服务诉求、当前的问题与挑战、网络智能化演进

方向三个方面，说明家庭自智网络服务平台的广泛应用场景和重要意义。同时，

概要阐述了研究的三方面主要内容，包括平台的架构设计、关键模型设计和关键

技术设计。

2.平台架构设计

2.1.业务架构

家庭自智网络服务平台业务架构分为数据、模型、服务三层，数据层将多个

触点采集的数据进行结构化归集，形成家庭网络档案；模型层基于家庭网络档案，

按照细分家庭场景进行建模，实现由网络数据到网络服务的转化；服务层面向用

户、网管、营销提供数智服务运营支撑，共同保障为用户的家庭自智网络服务的

交付。总体业务架构如图1所示。

4

========== 第 7 页 ==========
中国移动通信集团有限公司2022年申报高工论文

面向用户面向网管面向营销

WiFi控制一键体检设备管理随用监测行为画像质差营销
家庭服务网络报告网络医生劣化感知智能调优应用营销智能随销
绿色上网智能加速网络画像远程排障离网预警FTTR推荐
自智
网络模型终端识别应用识别质差识别组网方案网络意图应用分发...
模型模型模型设计模型分析模型推荐模型
服务
平台数据网络档案设备特征网络特征应用特征业务特征...

入户互联网设备
（WiFi网络）

CMNET等家庭内网
互联网内容源CRBRASOLT光猫......物联网设备
（IoT网络）
内容网核心网传送网接入网

图1业务架构设计

业务架构的核心为云Wi-Fi引擎，通过该引擎实现数据、模型、服务的业务

流程串通。云Wi-Fi引擎包括网络层、控制层、意愿层三层，实现对家庭用户上

网的意愿获取、意愿转化、网络策略下发、网络策略执行、网络状态感知、网络

反馈及再优化的服务闭环。概要设计如图2所示。

8K

8K点播Cloud VR直播教室
速率>280Mbps速率Gbps速率>750Mbps
时延<15ms时延<8ms时延<20ms

云Wi-Fi引擎

意愿获取

意愿转化与策略意愿结果反馈
意愿层
验证再优化

网络策略下发网络状态分析控制层

网络策略执行网络状态感知网络层

图2云Wi-Fi引擎概要设计

云Wi-Fi引擎在实现逻辑上，具体包括：

（1）云感知。通过端侧DPI数据采集与结构化分析，沉淀家庭网络档案，

5

========== 第 8 页 ==========
中国移动通信集团有限公司2022年申报高工论文

包括设备特征、网络特征、应用特征等，结合时间维度实现家庭网络态势感知，

进而推演用户上网特征，实现意愿获取。

（2）云建模。通过多维数据聚类分析，构建家庭网络场景化模型，包括终

端识别、应用识别、质差识别、组网方案设计、网络意图分析、应用分发推荐等，

实现意愿转化。通过家庭网络场景化模型，可推演家庭消费力等级、端机匹配度、

网络认知度、家庭结构、质差终端、离网意图等。

（3）云调度。通过模型推导，形成家庭网络调度策略，具体包括网络运维

策略、业务营销策略、满意度运营策略等，并结合具体策略，分发至不同触点（APP、

智能组网终端、省网管平台、营业厅CRM平台等），实现策略执行。如业务营

销策略，可细分为质差营销、应用营销、智能随销、离网预警、FTTR推荐等。

以网络运维策略为例，业务架构详细设计如图3所示。

3、特征匹配，爬虫沉淀数据Internet人工修正数据
2、数据解析，提取策略获取
网络、业务特征信息
，进行场景建模
云Wi-Fi引擎
家庭网络档案

1、端侧插件采4、策略下发（机器学习数据实验评测沉淀数据
集DPI数据，业务特征、优先
意图数据采集级等）5、网络保障
指令执行
插件
互联网VR业务（示例）

Wi-Fi热点•Wi-Fi6VR业务切片
数据流（网关或路由器）•终端带宽灵活分配
•......
控制流
网络流

图3云Wi-Fi引擎详细设计（示例）

2.2.技术架构

在平台技术架构设计上，采用成熟稳定、安全可靠、能力强大的软件组件作

为系统底座，使用微服务、容器化、持续集成、MVC、分布式集群等技术来构造

业务平台，使用Spring Cloud技术体系保证技术的先进性和系统的可靠性，引入

成熟开源组件GitLab、Jenkins、Nacos、Redis、Kafka、Elk等，满足系统的经济

性要求，实现核心服务内聚收敛，满足业务灵活可变，为用户提供实用、方便、

高效的操作环境。技术架构设计如图4所示。

6

========== 第 9 页 ==========
中国移动通信集团有限公司2022年申报高工论文

开发平台运维平台
UIPC WebHtml5大屏APP......

项目管理系统监控

JIRA网关WAFF5NginxIngress......SkyWalk

EProjectMetrics
预约订购装维服务客服排障增值应用运营分析
Promethus
业务服务
CICD订单管理设备查询开放集成定时任务......
Grafana
Gitlab
IMP
SVNSpring BootSpring CloudJunitMockitoLogback
服务框架
JenkinsYapiMybatisRestTemplateJWT日志分析

MavenFilebeat

数据存储MysqlRedisKafkaHbaseEs
JunitLogStash

npmKibana
Kubernetes容器集群
harbor基础设施AOP
DockerDockerDockerDockerDocker

图4技术架构设计

平台的技术架构特点如下：

（1）容器化：服务全面采用Docker容器化部署，充分使用Kubernets底层

能力，实现服务的自查自愈、服务的快速上线，多环境多集群无感迁移。

（2）海量数据处理：同时使用Elk日志框架和Hbase大数据集群，快速处

理海量数据，为业务提供关键数据支撑。

（3）微服务架构：能够同时满足应用服务、中间件集群的高可用，系统内

所有服务、中间件集群都可以通过Deployment、StatefulSet、Helm Charts等方

式快速标准化地部署。

（4）服务注册与发现、配置隔离：使用Nacos作为服务注册和配置管理中

心，实现应用和配置分离，配置和配置隔离，抽象出应用内可配置属性，通过配

置文件的属性变更，快速实现应用的能力变化，适应更丰富的业务场景。

（5）DevOps：使用Jenkins作为CICD流水线工具，实现快速的迭代测试，

低成本的持续集成和应用发布，实现业务从开发到测试到部署各阶段的全自动运

行。

（6）服务熔断和访问控制：通过服务隔离来避免由于依赖延迟、异常等情

7

========== 第 10 页 ==========
中国移动通信集团有限公司2022年申报高工论文

可信来源的请求、平台不同系统之间的请求、系统内微服务之间的请求均可制定

不同的访问策略，实现精准的访问控制，最小化开放服务，严格控制服务的安全

性。

图11容器化集群部署架构

4.5.Hystrix服务熔断

Hystrix是由Netflix开源的一个服务隔离组件，通过服务隔离来避免由于依

赖延迟、异常等情况引起资源耗尽导致系统不可用，在请求失败率达到一定阈值、

服务调用超时异常、线程资源不足等场景下进行服务的熔断，将失败请求记录到

故障数据库，降低系统压力，防止由于异常服务的问题将影响扩大至整个系统，

保障系统在局部故障的情况下整体服务的可用性。

16
